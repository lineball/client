(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(n,e,t){n.exports=t(40)},30:function(n,e,t){},40:function(n,e,t){"use strict";t.r(e);var r=t(0),o=t.n(r),i=t(9),a=t.n(i),c=(t(30),t(2)),u=t(1),l=function(n){return{x:10*n.x+5,y:10*n.y}},s=function(n){var e=n.x,t=n.y;return"".concat(e,"_").concat(t)},f=function(n){var e=Object(c.a)(n,2),t=e[0],r=e[1];return"".concat(s(t.position),":").concat(s(r.position))},m=t(10),p=t(3),v=function(n){return n.moves},d=Object(m.a)([v,function(n){return n.fields}],function(n,e){if(0===n.length){var t=e.find(function(n){return 4===n.position.x&&6===n.position.y});if(!t)throw new Error("Problem with getting last field");return t}if(1===n.length){var r=e.find(function(n){return 4===n.position.x&&6===n.position.y});if(!r)throw new Error("Problem with getting last field");return n[0].path[0]===r?n[0].path[1]:n[0].path[0]}var o=n[n.length-1];return o.path[o.direction]}),y=Object(m.a)([function(n){return n.turns}],function(n){if(!n.length)throw new Error("Error getting current turn");return n[n.length-1]}),b=Object(m.a)([v,d,function(n){return n.paths}],function(n,e,t){var r=n.filter(function(n){return n.path.includes(e)}).map(function(n){return n.path}),o=t.filter(function(n){return n.includes(e)});return Object(p.difference)(o,r).map(function(n){var t=Object(c.a)(n,2),r=t[0],o=t[1];return r===e?o:r})}),E=Object(u.b)(function(n,e){var t=n.game;return{current:d(t),isValidMove:b(t).includes(e.field)}},function(n){return{addMove:function(e){return n(function(n){return{type:"lineball@ADD_MOVE",payload:n}}(e))}}})(function(n){var e=Object(r.useState)(!1),t=Object(c.a)(e,2),i=t[0],a=t[1],u=n.position,s=u.x,f=u.y,m=n.current,p=n.addMove,v=n.field,d=n.isValidMove,y=m.position.x===s&&m.position.y===f,b=l({x:s,y:f}),E=b.x,h=b.y,x=l(m.position),g=x.x,O=x.y;return o.a.createElement(o.a.Fragment,null,d&&o.a.createElement("circle",{onClick:function(){a(!1),p(v)},r:"4",fill:"transparent",cx:E,cy:h,onMouseEnter:function(){return a(!0)},onMouseLeave:function(){return a(!1)}}),o.a.createElement("circle",{pointerEvents:"none",cx:E,cy:h,r:i||y?"2":"0.5",fill:y?"red":"white"}),i&&d&&o.a.createElement("line",{pointerEvents:"none",x1:g,y1:O,x2:E,y2:h,stroke:"pink"}))}),h=Object(u.b)(function(n){var e=n.game;return{fields:e.fields,moves:e.moves,size:e.size,borders:e.borders}})(function(n){var e=n.fields,t=n.moves,r=n.size,i=r.x,a=r.y,c=n.borders;return o.a.createElement("svg",{width:50*i,height:50*(a+1),viewBox:"0 0 ".concat(10*i," ").concat(10*a)},c.map(function(n){var e=l(n[0].position),t=e.x,r=e.y,i=l(n[1].position),a=i.x,c=i.y;return o.a.createElement("line",{key:"\n              ".concat(t,"\n              ").concat(r,"\n              ").concat(a,"\n              ").concat(c,"\n            "),pointerEvents:"none",x1:t,y1:r,x2:a,y2:c,stroke:"blue"})}),t.map(function(n){var e=l(n.path[0].position),t=e.x,r=e.y,i=l(n.path[1].position),a=i.x,c=i.y;return o.a.createElement("line",{key:"\n              ".concat(t,"\n              ").concat(r,"\n              ").concat(a,"\n              ").concat(c,"\n            "),pointerEvents:"none",x1:t,y1:r,x2:a,y2:c,stroke:"white"})}),e.map(function(n){return o.a.createElement(E,Object.assign({},n,{key:"".concat(n.position.x,"_").concat(n.position.y),field:n}))}))}),x=Object(u.b)(function(n){return{moves:n.game.moves}},function(n){return{revertMove:function(){return n({type:"lineball@REVERT_MOVE"})}}})(function(n){var e=n.moves,t=n.revertMove;return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,"Moves"),o.a.createElement("button",{onClick:function(){t()}},"revert"),o.a.createElement("ul",null,e.map(function(n){return o.a.createElement("li",{key:f(n.path)},JSON.stringify(n))})))}),g=Object(u.b)(function(n){var e=n.game;return{turn:y(e)}})(function(n){var e=n.turn,t=e.player,r=e.moves;return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,"Turn"),o.a.createElement("p",null,"player: ",t),o.a.createElement("p",null,"moves: ",JSON.stringify(r)))}),O=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(h,null),o.a.createElement(g,null),o.a.createElement(x,null))},j=t(19);function w(){var n=Object(j.a)(["\n  max-width: 960px;\n  margin: auto;\n"]);return w=function(){return n},n}var M,k=t(20).a.div(w()),_=t(6),V=t(8),T=t(16);!function(n){n[n.WHITE=0]="WHITE",n[n.BLACK=1]="BLACK"}(M||(M={}));var C=function(n){var e=n.x,t=n.y;return{name:"".concat(String.fromCharCode(65+t)).concat(e),position:{x:e,y:t}}},B=function(){return Object(p.flatMap)([].concat(Object(V.a)([0,12].map(function(n){return Object(p.range)(3,6).map(function(e){return C({x:e,y:n})})})),Object(V.a)(Object(p.range)(1,12).map(function(n){return Object(p.range)(0,9).map(function(e){return C({x:e,y:n})})}))))},R=function(n){return Object(p.partition)(Object(p.flatMap)(n.map(function(e){var t=e.position,r=t.x,o=t.y;return n.filter(function(n){return([r,r+1].includes(n.position.x)&&[o,o+1].includes(n.position.y)||n.position.x===r-1&&n.position.y===o+1)&&n.name!==e.name&&!function(n){var e=f(n);return["5_0:6_1","3_0:2_1","6_11:5_12","2_11:3_12"].includes(e)}([e,n])}).map(function(n){return[e,n]})})),function(n){var e=Object(c.a)(n,2),t=e[0],r=e[1];return function(n){var e=Object(c.a)(n,2),t=e[0],r=e[1];if(t.y===r.y){if([0,12].includes(t.y))return!0;if([1,11].includes(t.y)&&(t.x<3||t.x>=5))return!0}else if(t.x===r.x){if([0,8].includes(t.x))return!0;if([3,5].includes(t.x)&&[0,11].includes(t.y))return!0}return!1}([t.position,r.position])})},S=function(){var n=B(),e=R(n),t=Object(c.a)(e,2),r=t[0];return{fields:n,paths:t[1],borders:r,moves:[],turns:[{player:M.WHITE,moves:[]}],size:{x:9,y:12}}},W=S(),z=t(23),A=Object(_.combineReducers)({game:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"lineball@ADD_MOVE":var t=e.payload,r=d(n),o=n.paths.find(function(n){return n.includes(t)&&n.includes(r)});if(!o)throw new Error("Path not found!");console.log(f(o));var i=o[0]===t?0:1;return Object(T.a)({},n,{moves:[].concat(Object(V.a)(n.moves),[{path:o,direction:i}])});case"lineball@REVERT_MOVE":return Object(T.a)({},n,{moves:n.moves.slice(0,-1)});default:return n}}}),D=Object(_.createStore)(A,Object(z.devToolsEnhancer)({})),F=function(){return o.a.createElement(u.a,{store:D},o.a.createElement(k,null,o.a.createElement(O,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(n){n.unregister()})}},[[25,1,2]]]);
//# sourceMappingURL=main.a32097ba.chunk.js.map