(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(n,e,t){n.exports=t(37)},30:function(n,e,t){},37:function(n,e,t){"use strict";t.r(e);var r=t(0),o=t.n(r),a=t(11),i=t.n(a),c=(t(30),t(3)),u=t(2),l=function(n){return{x:10*n.x+5,y:10*n.y}},s=function(n){var e=n.x,t=n.y;return"".concat(e,"_").concat(t)},f=function(n){var e=Object(c.a)(n,2),t=e[0],r=e[1];return"".concat(s(t.position),":").concat(s(r.position))},m=t(10),p=t(5),v=function(n){return n.turns.flatMap(function(n){return n.moves})},b=Object(m.a)([v,function(n){return n.fields}],function(n,e){if(0===n.length){var t=e.find(function(n){return 4===n.position.x&&6===n.position.y});if(!t)throw new Error("Problem with getting last field");return t}if(1===n.length){var r=e.find(function(n){return 4===n.position.x&&6===n.position.y});if(!r)throw new Error("Problem with getting last field");return n[0].path[0]===r?n[0].path[1]:n[0].path[0]}var o=n[n.length-1];return o.path[o.direction]}),d=Object(m.a)([function(n){return n.turns}],function(n){if(!n.length)throw new Error("Error getting current turn");return n[n.length-1]}),h=Object(m.a)([b,function(n){return n.paths}],function(n,e){return e.filter(function(e){return e.includes(n)})}),E=Object(m.a)([v,b],function(n,e){return n.filter(function(n){return n.path.includes(e)}).map(function(n){return n.path})}),y=Object(m.a)([b,h,E],function(n,e,t){return Object(p.difference)(e,t).map(function(e){var t=Object(c.a)(e,2),r=t[0],o=t[1];return r===n?o:r})}),O=Object(u.b)(function(n,e){var t=n.game;return{current:b(t),isValidMove:y(t).includes(e.field)}},function(n){return{addMove:function(e){return n(function(n){return{type:"@lineball/ADD_MOVE",payload:n}}(e))}}})(function(n){var e=n.position,t=e.x,a=e.y,i=n.current,u=n.addMove,s=n.field,f=n.isValidMove,m=Object(r.useState)(!1),p=Object(c.a)(m,2),v=p[0],b=p[1],d=i.position.x===t&&i.position.y===a,h=l({x:t,y:a}),E=h.x,y=h.y,O=l(i.position),g=O.x,j=O.y;return o.a.createElement(o.a.Fragment,null,f&&o.a.createElement("circle",{onClick:function(){b(!1),u(s)},r:"4",fill:"transparent",cx:E,cy:y,onMouseEnter:function(){return b(!0)},onMouseLeave:function(){return b(!1)}}),o.a.createElement("circle",{pointerEvents:"none",cx:E,cy:y,r:v||d?"2":"0.5",fill:d?"red":"white"}),v&&f&&o.a.createElement("line",{pointerEvents:"none",x1:g,y1:j,x2:E,y2:y,stroke:"pink"}))}),g=function(n){var e=n.color,t=void 0===e?"white":e,a=n.path,i=Object(r.useMemo)(function(){return l(a[0].position)},a),c=i.x,u=i.y,s=Object(r.useMemo)(function(){return l(a[1].position)},a),f=s.x,m=s.y;return o.a.createElement("line",{pointerEvents:"none",x1:c,y1:u,x2:f,y2:m,stroke:t})},j=Object(u.b)(function(n){var e=n.game,t=e.fields,r=e.size,o=e.borders;return{fields:t,moves:v(e),size:r,borders:o}})(function(n){var e=n.fields,t=n.moves,r=n.size,a=r.x,i=r.y,c=n.borders;return o.a.createElement("svg",{width:50*a,height:50*(i+1),viewBox:"0 0 ".concat(10*a," ").concat(10*i)},c.map(function(n){return o.a.createElement(g,{key:f(n),path:n,color:"blue"})}),t.map(function(n){var e=n.path;return o.a.createElement(g,{key:f(e),path:e})}),e.map(function(n){return o.a.createElement(O,Object.assign({},n,{key:"".concat(n.position.x,"_").concat(n.position.y),field:n}))}))}),x=Object(u.b)(function(n){var e=n.game;return{moves:v(e),turn:d(e)}},function(n){return{revertMove:function(){return n({type:"@lineball/REVERT_MOVE"})},revertTurn:function(){return n({type:"@lineball/REVERT_TURN"})}}})(function(n){var e=n.moves,t=n.revertMove,r=n.revertTurn,a=n.turn;return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,"Moves"),a.moves.length?o.a.createElement("button",{type:"button",onClick:function(){t()}},"revert move"):e.length&&o.a.createElement("button",{type:"button",onClick:function(){r()}},"revert turn"),o.a.createElement("ul",null,e.map(function(n){return o.a.createElement("li",{key:f(n.path)},JSON.stringify(n))})))}),w=Object(u.b)(function(n){var e=n.game;return{turn:d(e)}})(function(n){var e=n.turn,t=e.player,r=e.moves;return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,"Turn"),o.a.createElement("p",null,"player: ",t),o.a.createElement("p",null,"moves: ",JSON.stringify(r)))}),M=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(j,null),o.a.createElement(w,null),o.a.createElement(x,null))},T=t(19);function _(){var n=Object(T.a)(["\n  max-width: 960px;\n  margin: auto;\n"]);return _=function(){return n},n}var k,R=t(20).a.div(_()),V=t(8),C=t(4),W=t(1);!function(n){n[n.WHITE=0]="WHITE",n[n.BLACK=1]="BLACK"}(k||(k={}));var I=function(n){var e=n.x,t=n.y;return{name:"".concat(String.fromCharCode(65+t)).concat(e),position:{x:e,y:t}}},B=function(){return Object(p.flatMap)([].concat(Object(C.a)([0,12].map(function(n){return Object(p.range)(3,6).map(function(e){return I({x:e,y:n})})})),Object(C.a)(Object(p.range)(1,12).map(function(n){return Object(p.range)(0,9).map(function(e){return I({x:e,y:n})})}))))},H=function(n){return Object(p.partition)(Object(p.flatMap)(n.map(function(e){var t=e.position,r=t.x,o=t.y;return n.filter(function(n){return([r,r+1].includes(n.position.x)&&[o,o+1].includes(n.position.y)||n.position.x===r-1&&n.position.y===o+1)&&n.name!==e.name&&!function(n){var e=f(n);return["5_0:6_1","3_0:2_1","6_11:5_12","2_11:3_12"].includes(e)}([e,n])}).map(function(n){return[e,n]})})),function(n){var e=Object(c.a)(n,2),t=e[0],r=e[1];return function(n){var e=Object(c.a)(n,2),t=e[0],r=e[1];if(t.y===r.y){if([0,12].includes(t.y))return!0;if([1,11].includes(t.y)&&(t.x<3||t.x>=5))return!0}else if(t.x===r.x){if([0,8].includes(t.x))return!0;if([3,5].includes(t.x)&&[0,11].includes(t.y))return!0}return!1}([t.position,r.position])})},S=function(){var n=B(),e=H(n),t=Object(c.a)(e,2),r=t[0];return{fields:n,paths:t[1],borders:r,turns:[{player:k.WHITE,moves:[]}],size:{x:9,y:12}}},A=S(),z=t(23),D=Object(V.combineReducers)({game:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"@lineball/ADD_MOVE":var t=e.payload,r=b(n),o=n.paths.find(function(n){return n.includes(t)&&n.includes(r)});if(!o)throw new Error("Path not found!");var a=o[0]===t?0:1,i=Object(W.a)({},n.turns[n.turns.length-1],{moves:[].concat(Object(C.a)(n.turns[n.turns.length-1].moves),[{path:o,direction:a}])}),c=!!n.turns.flatMap(function(n){return n.moves}).map(function(n){return n.path}).concat(n.borders).filter(function(n){return n.includes(t)}).map(function(n){return n}).length;if(console.log({isSameTurn:c}),c)return Object(W.a)({},n,{turns:[].concat(Object(C.a)(n.turns.slice(0,-1)),[i])});var u={moves:[],player:d(n).player===k.WHITE?k.BLACK:k.WHITE};return Object(W.a)({},n,{turns:[].concat(Object(C.a)(n.turns.slice(0,-1)),[i,u])});case"@lineball/REVERT_MOVE":var l=n.turns[n.turns.length-1];return l.moves.length>0?(console.log("reverting move"),Object(W.a)({},n,{turns:[].concat(Object(C.a)(n.turns.slice(0,-1)),[Object(W.a)({},l,{moves:Object(C.a)(l.moves.slice(0,-1))})])})):Object(W.a)({},n);case"@lineball/REVERT_TURN":if(n.turns.length>2){if(n.turns[n.turns.length-1].moves.length>0)return Object(W.a)({},n);var s=n.turns[n.turns.length-2];return Object(W.a)({},n,{turns:[].concat(Object(C.a)(n.turns.slice(0,-2)),[Object(W.a)({},s,{moves:[]})])})}return Object(W.a)({},n,{turns:[{player:k.WHITE,moves:[]}]});default:return n}}}),F=Object(V.createStore)(D,Object(z.devToolsEnhancer)({})),J=function(){return o.a.createElement(u.a,{store:F},o.a.createElement(R,null,o.a.createElement(M,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(n){n.unregister()})}},[[25,1,2]]]);
//# sourceMappingURL=main.235e2757.chunk.js.map