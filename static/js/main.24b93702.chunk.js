(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,n){e.exports=n(55)},43:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),i=n(24),o=n.n(i),l=(n(43),n(7)),u=n(5),s=n(12),f=function(e){return{x:10*e.x+5,y:10*e.y}},m=function(e){var t=e.x,n=e.y;return"".concat(t,"_").concat(n)},p=function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];return"".concat(m(n.position),":").concat(m(r.position))},d=n(21),b=n(13),v=function(e){return e.turns.flatMap(function(e){return e.moves})},h=Object(d.a)([v,function(e){return e.fields}],function(e,t){if(0===e.length){var n=t.find(function(e){return 4===e.position.x&&6===e.position.y});if(!n)throw new Error("Problem with getting last field");return n}if(1===e.length){var r=t.find(function(e){return 4===e.position.x&&6===e.position.y});if(!r)throw new Error("Problem with getting last field");return e[0].path[0]===r?e[0].path[1]:e[0].path[0]}var a=e[e.length-1];return a.path[a.direction]}),O=Object(d.a)([function(e){return e.turns}],function(e){if(!e.length)throw new Error("Error getting current turn");return e[e.length-1]}),E=Object(d.a)([h,function(e){return e.paths}],function(e,t){return t.filter(function(t){return t.includes(e)})}),y=Object(d.a)([v,h],function(e,t){return e.filter(function(e){return e.path.includes(t)}).map(function(e){return e.path})}),g=Object(d.a)([h,E,y],function(e,t,n){return Object(b.difference)(t,n).map(function(t){var n=Object(l.a)(t,2),r=n[0],a=n[1];return r===e?a:r})}),j=Object(a.memo)(function(e){var t=e.color,n=void 0===t?"white":t,r=e.path,i=Object(a.useMemo)(function(){return f(r[0].position)},r),o=i.x,l=i.y,u=Object(a.useMemo)(function(){return f(r[1].position)},r),s=u.x,m=u.y;return c.a.createElement("line",{pointerEvents:"none",x1:o,y1:l,x2:s,y2:m,stroke:n})}),x=Object(s.b)(function(e,t){var n=e.game,r=t.field;return{current:h(n),isValidMove:g(n).includes(r)}},function(e){return{addMove:function(t){return e(function(e){return{type:"@lineball/ADD_MOVE",payload:e}}(t))}}})(function(e){var t=e.position,n=t.x,r=t.y,i=e.current,o=e.addMove,u=e.field,s=e.isValidMove,m=Object(a.useState)(!1),p=Object(l.a)(m,2),d=p[0],b=p[1],v=i===u,h=f({x:n,y:r}),O=h.x,E=h.y;return c.a.createElement(c.a.Fragment,null,s&&c.a.createElement("circle",{onClick:function(){b(!1),o(u)},r:"4",fill:"transparent",cx:O,cy:E,onMouseEnter:function(){return b(!0)},onMouseLeave:function(){return b(!1)}}),c.a.createElement("circle",{pointerEvents:"none",cx:O,cy:E,r:d||v?"2":"0.5",fill:v?"red":"white"}),d&&s&&c.a.createElement(j,{path:[i,u]}))});!function(e){e[e.WHITE=0]="WHITE",e[e.BLACK=1]="BLACK"}(r||(r={}));var w=Object(s.b)(function(e){var t=e.game,n=t.fields,r=t.size,a=t.borders;return{fields:n,moves:v(t),size:r,borders:a,currentTurn:O(t)}})(function(e){var t=e.fields,n=e.moves,a=e.size,i=a.x,o=a.y,l=e.borders,u=e.currentTurn;return c.a.createElement("svg",{width:50*i,height:50*(o+1),viewBox:"0 0 ".concat(10*i," ").concat(10*o)},l.map(function(e){return c.a.createElement(j,{key:p(e),path:e,color:u.player===r.WHITE?"blue":"red"})}),n.map(function(e){var t=e.path;return c.a.createElement(j,{key:p(t),path:t})}),t.map(function(e){return c.a.createElement(x,Object.assign({},e,{key:"".concat(e.position.x,"_").concat(e.position.y),field:e}))}))}),C=Object(s.b)(function(e){var t=e.game;return{moves:v(t),turn:O(t)}},function(e){return{revertMove:function(){return e({type:"@lineball/REVERT_MOVE"})},revertTurn:function(){return e({type:"@lineball/REVERT_TURN"})}}})(function(e){var t=e.moves,n=e.revertMove,r=e.revertTurn,a=e.turn;return c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",null,"Moves"),a.moves.length?c.a.createElement("button",{type:"button",onClick:function(){n()}},"revert move"):t.length&&c.a.createElement("button",{type:"button",onClick:function(){r()}},"revert turn"),c.a.createElement("ul",null,t.map(function(e){return c.a.createElement("li",{key:p(e.path)},JSON.stringify(e))})))}),k=Object(s.b)(function(e){var t=e.game;return{turn:O(t)}})(function(e){var t=e.turn,n=t.player,r=t.moves;return c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",null,"Turn"),c.a.createElement("p",null,"player: ",n),c.a.createElement("p",null,"moves: ",JSON.stringify(r)))}),M=n(18),T=n(6);function R(){var e=Object(u.a)(["\n  max-width: 960px;\n  height: 100%;\n  margin: auto;\n"]);return R=function(){return e},e}var _=T.a.div(R()),H="#282c34",V={yellow:"#ff0",red:"#f00"},A=function(){return c.a.createElement(_,null,c.a.createElement(M.b,{to:"/"},"Home"),c.a.createElement("br",null),c.a.createElement(w,null),c.a.createElement(k,null),c.a.createElement(C,null))},B=n(17),S=n(2),W=n(4),z=function(e){var t=e.x,n=e.y;return{name:"".concat(String.fromCharCode(65+n)).concat(t),position:{x:t,y:n}}},I=function(){return Object(b.flatMap)([].concat(Object(S.a)([0,12].map(function(e){return Object(b.range)(3,6).map(function(t){return z({x:t,y:e})})})),Object(S.a)(Object(b.range)(1,12).map(function(e){return Object(b.range)(0,9).map(function(t){return z({x:t,y:e})})}))))},U=function(e){return Object(b.partition)(Object(b.flatMap)(e.map(function(t){var n=t.position,r=n.x,a=n.y;return e.filter(function(e){return([r,r+1].includes(e.position.x)&&[a,a+1].includes(e.position.y)||e.position.x===r-1&&e.position.y===a+1)&&e.name!==t.name&&!function(e){var t=p(e);return["5_0:6_1","3_0:2_1","6_11:5_12","2_11:3_12"].includes(t)}([t,e])}).map(function(e){return[t,e]})})),function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];return function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];if(n.y===r.y){if([0,12].includes(n.y))return!0;if([1,11].includes(n.y)&&(n.x<3||n.x>=5))return!0}else if(n.x===r.x){if([0,8].includes(n.x))return!0;if([3,5].includes(n.x)&&[0,11].includes(n.y))return!0}return!1}([n.position,r.position])})},F=function(){var e=I(),t=U(e),n=Object(l.a)(t,2),a=n[0];return{fields:e,paths:n[1],borders:a,turns:[{player:r.WHITE,moves:[]}],size:{x:9,y:12}}},L=F(),D=n(35),G=Object(B.combineReducers)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@lineball/ADD_MOVE":var n=t.payload,a=h(e),c=e.paths.find(function(e){return e.includes(n)&&e.includes(a)});if(!c)throw new Error("Path not found!");var i=c[0]===n?0:1,o=Object(W.a)({},e.turns[e.turns.length-1],{moves:[].concat(Object(S.a)(e.turns[e.turns.length-1].moves),[{path:c,direction:i}])});if(e.turns.flatMap(function(e){return e.moves}).map(function(e){return e.path}).concat(e.borders).filter(function(e){return e.includes(n)}).map(function(e){return e}).length)return Object(W.a)({},e,{turns:[].concat(Object(S.a)(e.turns.slice(0,-1)),[o])});var l={moves:[],player:O(e).player===r.WHITE?r.BLACK:r.WHITE};return Object(W.a)({},e,{turns:[].concat(Object(S.a)(e.turns.slice(0,-1)),[o,l])});case"@lineball/REVERT_MOVE":var u=e.turns[e.turns.length-1];return u.moves.length>0?Object(W.a)({},e,{turns:[].concat(Object(S.a)(e.turns.slice(0,-1)),[Object(W.a)({},u,{moves:Object(S.a)(u.moves.slice(0,-1))})])}):Object(W.a)({},e);case"@lineball/REVERT_TURN":if(e.turns.length>2){if(e.turns[e.turns.length-1].moves.length>0)return Object(W.a)({},e);var s=e.turns[e.turns.length-2];return Object(W.a)({},e,{turns:[].concat(Object(S.a)(e.turns.slice(0,-2)),[Object(W.a)({},s,{moves:[]})])})}return Object(W.a)({},e,{turns:[{player:r.WHITE,moves:[]}]});default:return e}}}),J=Object(B.createStore)(G,Object(D.devToolsEnhancer)({})),N=n(3);function P(){var e=Object(u.a)(["\n  flex: 0;\n  font-size: 120px;\n  margin-left: -10px;\n  z-index: 2;\n"]);return P=function(){return e},e}function K(){var e=Object(u.a)(["\n  flex: 0;\n  z-index: 1;\n"]);return K=function(){return e},e}function Z(){var e=Object(u.a)(["\n  display: flex;\n  width: 100%;\n  height: 210px;\n\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]);return Z=function(){return e},e}var $=Object(T.a)(N.a.div)(Z()),q=T.a.div(K()),Q=(T.a.div(P()),function(e){var t=e.onAnimationFinish,n=Object(a.useRef)(null),r=Object(N.c)({from:{height:0},to:{height:394},ref:n}),i=Object(a.useRef)(null),o=Object(N.c)({from:{y:394},to:{y:-10},ref:i}),l=Object(a.useRef)(null),u=Object(N.c)({from:{fillOpacity:0},to:{fillOpacity:1},ref:l}),s=Object(a.useRef)(null),f=Object(N.c)({to:{minHeight:"0vh"},from:{minHeight:"100vh"},ref:s}),m=Object(a.useRef)(null),p=Object(N.c)({to:{width:"200"},from:{width:"400"},ref:m,onRest:t});return Object(N.b)([n,i,l,s,m],[0,.38,.6,.8,.95]),c.a.createElement($,{style:f},c.a.createElement(q,null,c.a.createElement(N.a.svg,{viewBox:"-1 -1 645 394",width:"400",style:p},c.a.createElement("defs",null,c.a.createElement("linearGradient",{id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},c.a.createElement("stop",{offset:"0%",stopColor:V.red,stopOpacity:"1"}),c.a.createElement("stop",{offset:"100%",stopColor:V.yellow,stopOpacity:"1"})),c.a.createElement("linearGradient",{id:"grad2",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},c.a.createElement("stop",{offset:"0%",stopColor:V.yellow,stopOpacity:"1"}),c.a.createElement("stop",{offset:"100%",stopColor:V.red,stopOpacity:"1"})),c.a.createElement("linearGradient",{id:"grad3",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},c.a.createElement("stop",{offset:"0%",stopColor:"#aaa",stopOpacity:"1"}),c.a.createElement("stop",{offset:"100%",stopColor:"white",stopOpacity:"1"})),c.a.createElement("mask",{id:"farTrailMask",maskUnits:"userSpaceOnUse"},c.a.createElement(N.a.rect,{width:"645",height:"394",fill:"white",style:r})),c.a.createElement("mask",{id:"closeTrailAndBallMask",maskUnits:"userSpaceOnUse"},c.a.createElement(N.a.rect,{width:"645",height:"420",fill:"white",style:o,y:"394"}))),c.a.createElement("path",{id:"far-trail",d:"M437.5 390C419.5 390 276 390 258 390C229.5 334 194 276.5 151 217C108 157.5 57.5 96 0 32.5C91 87.5 173.5 145 246.5 204.5C319.5 264.5 383 326 437.5 390Z",mask:"url(#farTrailMask)",fill:"url(#grad2)"}),c.a.createElement("path",{id:"close-trail",d:"M335.9 234C364.5 184.5 394.5 140 426 100C433 137.5 447.5 166 470 185C492 204 518.5 212.5 550 211.5C527 235 505 261.5 483.5 291C462 320.5 446.5 353.5 437.5 390L257.5 390C281 335.5 307.5 283.5 336 234Z",mask:"url(#closeTrailAndBallMask)",fill:"url(#grad1)"}),c.a.createElement(N.a.path,{id:"ball",d:"M540 200C484.81 200 440 155.17 440 100C440 44.81 484.81 0 540 0C595.19 0 640 44.81 640 100C640 155.17 595.19 200 540 200Z",fill:"url(#grad3)",fillOpacity:"0",style:u}))))}),X=n(15),Y=n(37);function ee(){var e=Object(u.a)(["\n  padding: 10px;\n  background: white;\n  color: ",";\n  margin-top: 5px;\n  font-size: 3rem;\n  &:hover {\n    transform: scale(1.5);\n  }\n"]);return ee=function(){return e},e}var te=T.a.div(ee(),H),ne=function(e){var t=e.path,n=e.label;return c.a.createElement(te,null,c.a.createElement(M.b,{to:t},n))};function re(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  flex-direction: column;\n  margin-left: 50%;\n  transform: rotate(-5deg) skew(-5deg);\n"]);return re=function(){return e},e}var ae=T.a.div(re()),ce=[{label:"Game",path:"/game"},{label:"Profile",path:"/game"},{label:"Ranking",path:"/game"},{label:"Settings",path:"/game"},{label:"Credits",path:"/game"}],ie=function(){var e=Object(N.d)(ce.length,{opacity:1,x:0,from:{opacity:0,x:380}});return c.a.createElement(ae,null,e.map(function(e,t){var n=e.x,r=Object(Y.a)(e,["x"]);return c.a.createElement(N.a.div,{key:ce[t].label,style:Object(W.a)({transform:n.interpolate(function(e){return"translate3d(".concat(e,"px,0,0)")})},r)},c.a.createElement(ne,ce[t]))}))};function oe(){var e=Object(u.a)(["\n  background-color: #282c34;\n  min-height: 100%;\n  min-width: 100%;\n"]);return oe=function(){return e},e}var le=T.a.div(oe()),ue=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1];return c.a.createElement(le,null,c.a.createElement(s.a,{store:J},c.a.createElement(M.a,null,c.a.createElement(Q,{onAnimationFinish:function(){return r(!0)}}),n&&c.a.createElement(X.c,null,c.a.createElement(X.a,{path:"/",exact:!0,component:ie}),c.a.createElement(X.a,{path:"/game",component:A})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[38,1,2]]]);
//# sourceMappingURL=main.24b93702.chunk.js.map