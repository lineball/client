(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,n){e.exports=n(41)},34:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r,a=n(0),i=n.n(a),c=n(17),o=n.n(c),u=(n(34),n(4)),l=n(7),s=function(e){return{x:10*e.x+5,y:10*e.y}},f=function(e){var t=e.x,n=e.y;return"".concat(t,"_").concat(n)},m=function(e){var t=Object(u.a)(e,2),n=t[0],r=t[1];return"".concat(f(n.position),":").concat(f(r.position))},p=n(16),d=n(8),b=function(e){return e.turns.flatMap(function(e){return e.moves})},v=Object(p.a)([b,function(e){return e.fields}],function(e,t){if(0===e.length){var n=t.find(function(e){return 4===e.position.x&&6===e.position.y});if(!n)throw new Error("Problem with getting last field");return n}if(1===e.length){var r=t.find(function(e){return 4===e.position.x&&6===e.position.y});if(!r)throw new Error("Problem with getting last field");return e[0].path[0]===r?e[0].path[1]:e[0].path[0]}var a=e[e.length-1];return a.path[a.direction]}),h=Object(p.a)([function(e){return e.turns}],function(e){if(!e.length)throw new Error("Error getting current turn");return e[e.length-1]}),O=Object(p.a)([v,function(e){return e.paths}],function(e,t){return t.filter(function(t){return t.includes(e)})}),y=Object(p.a)([b,v],function(e,t){return e.filter(function(e){return e.path.includes(t)}).map(function(e){return e.path})}),E=Object(p.a)([v,O,y],function(e,t,n){return Object(d.difference)(t,n).map(function(t){var n=Object(u.a)(t,2),r=n[0],a=n[1];return r===e?a:r})}),g=Object(a.memo)(function(e){var t=e.color,n=void 0===t?"white":t,r=e.path,c=Object(a.useMemo)(function(){return s(r[0].position)},r),o=c.x,u=c.y,l=Object(a.useMemo)(function(){return s(r[1].position)},r),f=l.x,m=l.y;return i.a.createElement("line",{pointerEvents:"none",x1:o,y1:u,x2:f,y2:m,stroke:n})}),j=Object(l.b)(function(e,t){var n=e.game,r=t.field;return{current:v(n),isValidMove:E(n).includes(r)}},function(e){return{addMove:function(t){return e(function(e){return{type:"@lineball/ADD_MOVE",payload:e}}(t))}}})(function(e){var t=e.position,n=t.x,r=t.y,c=e.current,o=e.addMove,l=e.field,f=e.isValidMove,m=Object(a.useState)(!1),p=Object(u.a)(m,2),d=p[0],b=p[1],v=c===l,h=s({x:n,y:r}),O=h.x,y=h.y;return i.a.createElement(i.a.Fragment,null,f&&i.a.createElement("circle",{onClick:function(){b(!1),o(l)},r:"4",fill:"transparent",cx:O,cy:y,onMouseEnter:function(){return b(!0)},onMouseLeave:function(){return b(!1)}}),i.a.createElement("circle",{pointerEvents:"none",cx:O,cy:y,r:d||v?"2":"0.5",fill:v?"red":"white"}),d&&f&&i.a.createElement(g,{path:[c,l]}))});!function(e){e[e.WHITE=0]="WHITE",e[e.BLACK=1]="BLACK"}(r||(r={}));var x=Object(l.b)(function(e){var t=e.game,n=t.fields,r=t.size,a=t.borders;return{fields:n,moves:b(t),size:r,borders:a,currentTurn:h(t)}})(function(e){var t=e.fields,n=e.moves,a=e.size,c=a.x,o=a.y,u=e.borders,l=e.currentTurn;return i.a.createElement("svg",{width:50*c,height:50*(o+1),viewBox:"0 0 ".concat(10*c," ").concat(10*o)},u.map(function(e){return i.a.createElement(g,{key:m(e),path:e,color:l.player===r.WHITE?"blue":"red"})}),n.map(function(e){var t=e.path;return i.a.createElement(g,{key:m(t),path:t})}),t.map(function(e){return i.a.createElement(j,Object.assign({},e,{key:"".concat(e.position.x,"_").concat(e.position.y),field:e}))}))}),w=Object(l.b)(function(e){var t=e.game;return{moves:b(t),turn:h(t)}},function(e){return{revertMove:function(){return e({type:"@lineball/REVERT_MOVE"})},revertTurn:function(){return e({type:"@lineball/REVERT_TURN"})}}})(function(e){var t=e.moves,n=e.revertMove,r=e.revertTurn,a=e.turn;return i.a.createElement(i.a.Fragment,null,i.a.createElement("h3",null,"Moves"),a.moves.length?i.a.createElement("button",{type:"button",onClick:function(){n()}},"revert move"):t.length&&i.a.createElement("button",{type:"button",onClick:function(){r()}},"revert turn"),i.a.createElement("ul",null,t.map(function(e){return i.a.createElement("li",{key:m(e.path)},JSON.stringify(e))})))}),C=Object(l.b)(function(e){var t=e.game;return{turn:h(t)}})(function(e){var t=e.turn,n=t.player,r=t.moves;return i.a.createElement(i.a.Fragment,null,i.a.createElement("h3",null,"Turn"),i.a.createElement("p",null,"player: ",n),i.a.createElement("p",null,"moves: ",JSON.stringify(r)))}),M=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(x,null),i.a.createElement(C,null),i.a.createElement(w,null))},T=n(13),k=n(14);function R(){var e=Object(T.a)(["\n  max-width: 960px;\n  height: 100%;\n  margin: auto;\n"]);return R=function(){return e},e}var _=k.a.div(R()),V=n(12),A=n(3),B=n(6),H=function(e){var t=e.x,n=e.y;return{name:"".concat(String.fromCharCode(65+n)).concat(t),position:{x:t,y:n}}},W=function(){return Object(d.flatMap)([].concat(Object(A.a)([0,12].map(function(e){return Object(d.range)(3,6).map(function(t){return H({x:t,y:e})})})),Object(A.a)(Object(d.range)(1,12).map(function(e){return Object(d.range)(0,9).map(function(t){return H({x:t,y:e})})}))))},I=function(e){return Object(d.partition)(Object(d.flatMap)(e.map(function(t){var n=t.position,r=n.x,a=n.y;return e.filter(function(e){return([r,r+1].includes(e.position.x)&&[a,a+1].includes(e.position.y)||e.position.x===r-1&&e.position.y===a+1)&&e.name!==t.name&&!function(e){var t=m(e);return["5_0:6_1","3_0:2_1","6_11:5_12","2_11:3_12"].includes(t)}([t,e])}).map(function(e){return[t,e]})})),function(e){var t=Object(u.a)(e,2),n=t[0],r=t[1];return function(e){var t=Object(u.a)(e,2),n=t[0],r=t[1];if(n.y===r.y){if([0,12].includes(n.y))return!0;if([1,11].includes(n.y)&&(n.x<3||n.x>=5))return!0}else if(n.x===r.x){if([0,8].includes(n.x))return!0;if([3,5].includes(n.x)&&[0,11].includes(n.y))return!0}return!1}([n.position,r.position])})},S=function(){var e=W(),t=I(e),n=Object(u.a)(t,2),a=n[0];return{fields:e,paths:n[1],borders:a,turns:[{player:r.WHITE,moves:[]}],size:{x:9,y:12}}},z=S(),F=n(27),U=Object(V.combineReducers)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@lineball/ADD_MOVE":var n=t.payload,a=v(e),i=e.paths.find(function(e){return e.includes(n)&&e.includes(a)});if(!i)throw new Error("Path not found!");var c=i[0]===n?0:1,o=Object(B.a)({},e.turns[e.turns.length-1],{moves:[].concat(Object(A.a)(e.turns[e.turns.length-1].moves),[{path:i,direction:c}])});if(e.turns.flatMap(function(e){return e.moves}).map(function(e){return e.path}).concat(e.borders).filter(function(e){return e.includes(n)}).map(function(e){return e}).length)return Object(B.a)({},e,{turns:[].concat(Object(A.a)(e.turns.slice(0,-1)),[o])});var u={moves:[],player:h(e).player===r.WHITE?r.BLACK:r.WHITE};return Object(B.a)({},e,{turns:[].concat(Object(A.a)(e.turns.slice(0,-1)),[o,u])});case"@lineball/REVERT_MOVE":var l=e.turns[e.turns.length-1];return l.moves.length>0?Object(B.a)({},e,{turns:[].concat(Object(A.a)(e.turns.slice(0,-1)),[Object(B.a)({},l,{moves:Object(A.a)(l.moves.slice(0,-1))})])}):Object(B.a)({},e);case"@lineball/REVERT_TURN":if(e.turns.length>2){if(e.turns[e.turns.length-1].moves.length>0)return Object(B.a)({},e);var s=e.turns[e.turns.length-2];return Object(B.a)({},e,{turns:[].concat(Object(A.a)(e.turns.slice(0,-2)),[Object(B.a)({},s,{moves:[]})])})}return Object(B.a)({},e,{turns:[{player:r.WHITE,moves:[]}]});default:return e}}}),L=Object(V.createStore)(U,Object(F.devToolsEnhancer)({})),D=n(5);function J(){var e=Object(T.a)(["\n  flex: 0;\n  font-size: 120px;\n  margin-left: -10px;\n  z-index: 2;\n"]);return J=function(){return e},e}function N(){var e=Object(T.a)(["\n  flex: 0;\n  z-index: 1;\n"]);return N=function(){return e},e}function G(){var e=Object(T.a)(["\n  display: flex;\n  width: 100%;\n  height: 210px;\n\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]);return G=function(){return e},e}var K=Object(k.a)(D.a.div)(G()),P=k.a.div(N()),Z=(k.a.div(J()),function(e){var t=e.onAnimationFinish,n=Object(a.useRef)(null),r=Object(D.c)({from:{height:0},to:{height:394},ref:n}),c=Object(a.useRef)(null),o=Object(D.c)({from:{y:394},to:{y:-10},ref:c}),u=Object(a.useRef)(null),l=Object(D.c)({from:{fillOpacity:0},to:{fillOpacity:1},ref:u}),s=Object(a.useRef)(null),f=Object(D.c)({to:{minHeight:"20%"},from:{minHeight:"100%"},ref:s}),m=Object(a.useRef)(null),p=Object(D.c)({to:{width:"200"},from:{width:"400"},ref:m,onRest:t});return Object(D.b)([n,c,u,s,m],[0,.38,.6,.8,.95]),i.a.createElement(K,{style:f},i.a.createElement(P,null,i.a.createElement(D.a.svg,{viewBox:"-1 -1 645 394",width:"400",style:p},i.a.createElement("defs",null,i.a.createElement("linearGradient",{id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},i.a.createElement("stop",{offset:"0%",stopColor:"rgb(255,0,0)",stopOpacity:"1"}),i.a.createElement("stop",{offset:"100%",stopColor:"rgb(255,255,0)",stopOpacity:"1"})),i.a.createElement("linearGradient",{id:"grad2",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},i.a.createElement("stop",{offset:"0%",stopColor:"rgb(255,255,0)",stopOpacity:"1"}),i.a.createElement("stop",{offset:"100%",stopColor:"rgb(255,0,0)",stopOpacity:"1"})),i.a.createElement("linearGradient",{id:"grad3",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},i.a.createElement("stop",{offset:"0%",stopColor:"#aaa",stopOpacity:"1"}),i.a.createElement("stop",{offset:"100%",stopColor:"white",stopOpacity:"1"})),i.a.createElement("mask",{id:"farTrailMask",maskUnits:"userSpaceOnUse"},i.a.createElement(D.a.rect,{width:"645",height:"394",fill:"white",style:r})),i.a.createElement("mask",{id:"closeTrailAndBallMask",maskUnits:"userSpaceOnUse"},i.a.createElement(D.a.rect,{width:"645",height:"420",fill:"white",style:o,y:"394"}))),i.a.createElement("path",{id:"far-trail",d:"M437.5 390C419.5 390 276 390 258 390C229.5 334 194 276.5 151 217C108 157.5 57.5 96 0 32.5C91 87.5 173.5 145 246.5 204.5C319.5 264.5 383 326 437.5 390Z",mask:"url(#farTrailMask)",fill:"url(#grad2)"}),i.a.createElement("path",{id:"close-trail",d:"M335.9 234C364.5 184.5 394.5 140 426 100C433 137.5 447.5 166 470 185C492 204 518.5 212.5 550 211.5C527 235 505 261.5 483.5 291C462 320.5 446.5 353.5 437.5 390L257.5 390C281 335.5 307.5 283.5 336 234Z",mask:"url(#closeTrailAndBallMask)",fill:"url(#grad1)"}),i.a.createElement(D.a.path,{id:"ball",d:"M540 200C484.81 200 440 155.17 440 100C440 44.81 484.81 0 540 0C595.19 0 640 44.81 640 100C640 155.17 595.19 200 540 200Z",fill:"url(#grad3)",fillOpacity:"0",style:l}))))}),$=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],r=t[1];return i.a.createElement(l.a,{store:L},i.a.createElement(_,null,i.a.createElement(Z,{onAnimationFinish:function(){return r(!0)}}),n&&i.a.createElement(M,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[29,1,2]]]);
//# sourceMappingURL=main.4f465144.chunk.js.map