(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,n,t){e.exports=t(54)},54:function(e,n,t){"use strict";t.r(n);var r,a=t(0),o=t.n(a),c=t(24),i=t.n(c),u=t(6),l=t(15),s=t(18),f=t(8),m=t(9);!function(e){e[e.WHITE=0]="WHITE",e[e.BLACK=1]="BLACK"}(r||(r={}));var d=t(12),p=function(e){return{x:10*e.x+5,y:10*e.y}},b=function(e){var n=e.x,t=e.y;return"".concat(n,"_").concat(t)},v=function(e){var n=Object(u.a)(e,2),t=n[0],r=n[1];return"".concat(b(t.position),":").concat(b(r.position))},h=function(e){var n=e.x,t=e.y;return{name:"".concat(String.fromCharCode(65+t)).concat(n),position:{x:n,y:t}}},g=function(){return Object(d.flatMap)([].concat(Object(f.a)([0,12].map(function(e){return Object(d.range)(3,6).map(function(n){return h({x:n,y:e})})})),Object(f.a)(Object(d.range)(1,12).map(function(e){return Object(d.range)(0,9).map(function(n){return h({x:n,y:e})})}))))},E=function(e){return Object(d.partition)(Object(d.flatMap)(e.map(function(n){var t=n.position,r=t.x,a=t.y;return e.filter(function(e){return([r,r+1].includes(e.position.x)&&[a,a+1].includes(e.position.y)||e.position.x===r-1&&e.position.y===a+1)&&e.name!==n.name&&!function(e){var n=v(e);return["5_0:6_1","3_0:2_1","6_11:5_12","2_11:3_12"].includes(n)}([n,e])}).map(function(e){return[n,e]})})),function(e){var n=Object(u.a)(e,2),t=n[0],r=n[1];return function(e){var n=Object(u.a)(e,2),t=n[0],r=n[1];if(t.y===r.y){if([0,12].includes(t.y))return!0;if([1,11].includes(t.y)&&(t.x<3||t.x>=5))return!0}else if(t.x===r.x){if([0,8].includes(t.x))return!0;if([3,5].includes(t.x)&&[0,11].includes(t.y))return!0}return!1}([t.position,r.position])})},y=function(){var e=g(),n=E(e),t=Object(u.a)(n,2),a=t[0];return{fields:e,paths:t[1],borders:a,turns:[{player:r.WHITE,moves:[]}],size:{x:9,y:12}}},O=y(),j=t(20),x=function(e){return e.turns.flatMap(function(e){return e.moves})},w=function(e){return e.find(function(e){return 4===e.position.x&&6===e.position.y})},k=Object(j.a)([x,function(e){return e.fields}],function(e,n){if(0===e.length){var t=w(n);if(!t)throw new Error("Problem with getting last field");return t}if(1===e.length){var r=w(n);if(!r)throw new Error("Problem with getting last field");return e[0].path[0]===r?e[0].path[1]:e[0].path[0]}var a=e[e.length-1];return a.path[a.direction]}),C=Object(j.a)([function(e){return e.turns}],function(e){if(!e.length)throw new Error("Error getting current turn");return e[e.length-1]}),M=Object(j.a)([k,function(e){return e.paths}],function(e,n){return n.filter(function(n){return n.includes(e)})}),T=Object(j.a)([x,k],function(e,n){return e.filter(function(e){return e.path.includes(n)}).map(function(e){return e.path})}),_=Object(j.a)([k,M,T],function(e,n,t){return Object(d.difference)(n,t).map(function(n){var t=Object(u.a)(n,2),r=t[0],a=t[1];return r===e?a:r})}),R=t(32),S=Object(s.combineReducers)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"@lineball/ADD_MOVE":var t=n.payload,a=k(e),o=e.paths.find(function(e){return e.includes(t)&&e.includes(a)});if(!o)throw new Error("Path not found!");var c=o[0]===t?0:1,i=Object(m.a)({},e.turns[e.turns.length-1],{moves:[].concat(Object(f.a)(e.turns[e.turns.length-1].moves),[{path:o,direction:c}])});if(e.turns.flatMap(function(e){return e.moves}).map(function(e){return e.path}).concat(e.borders).filter(function(e){return e.includes(t)}).length)return Object(m.a)({},e,{turns:[].concat(Object(f.a)(e.turns.slice(0,-1)),[i])});var u={moves:[],player:C(e).player===r.WHITE?r.BLACK:r.WHITE};return Object(m.a)({},e,{turns:[].concat(Object(f.a)(e.turns.slice(0,-1)),[i,u])});case"@lineball/REVERT_MOVE":var l=e.turns[e.turns.length-1];return l.moves.length>0?Object(m.a)({},e,{turns:[].concat(Object(f.a)(e.turns.slice(0,-1)),[Object(m.a)({},l,{moves:Object(f.a)(l.moves.slice(0,-1))})])}):Object(m.a)({},e);case"@lineball/REVERT_TURN":if(e.turns.length>2){if(e.turns[e.turns.length-1].moves.length>0)return Object(m.a)({},e);var s=e.turns[e.turns.length-2];return Object(m.a)({},e,{turns:[].concat(Object(f.a)(e.turns.slice(0,-2)),[Object(m.a)({},s,{moves:[]})])})}return Object(m.a)({},e,{turns:[{player:r.WHITE,moves:[]}]});default:return e}}}),A=Object(s.createStore)(S,Object(R.devToolsEnhancer)({})),F=t(4),z=t(3),H=t(5);function I(){var e=Object(F.a)(["\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  flex-direction: column;\n  overflow: hidden;\n  width: 100vw;\n  height: 100vh;\n"]);return I=function(){return e},e}function V(){var e=Object(F.a)(["\n  max-width: 960px;\n  margin: auto;\n  overflow-y: auto;\n  height: 100vh;\n"]);return V=function(){return e},e}function W(){var e=Object(F.a)(["\nbody {\n  margin: 0;\n  padding: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans',\n    'Droid Sans', 'Helvetica Neue', sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: white;\n  background-color: #282c34;\n}\n\na:any-link {\n  color: inherit;\n  text-decoration: none;\n}\n\n#root,\nhtml,\nbody {\n  height: 100%;\n  width: 100%;\n  min-height: 100%;\n  min-width: 100%;\n  overflow: hidden;\n}\n"]);return W=function(){return e},e}var B=Object(H.a)(W()),U=(H.b.div(V()),H.b.div(I())),L={background:"#282c34",logo:["#ff0","#f00","#aaa","#fff"]};function D(){var e=Object(F.a)(["\n  flex: 0;\n  z-index: 1;\n"]);return D=function(){return e},e}function N(){var e=Object(F.a)(["\n  display: flex;\n  width: 100%;\n\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]);return N=function(){return e},e}var G=Object(H.b)(z.a.div)(N()),J=H.b.div(D()),P=function(e){var n=e.toggle,t=e.onAnimationFinish,r=e.width,c=e.colors,i=Object(a.useState)(null),l=Object(u.a)(i,2),s=l[0],f=l[1];Object(a.useEffect)(function(){return f(Object(d.uniqueId)("_logo_svg_"))},[]);var m=Object(a.useRef)(null),p=Object(z.c)({from:{y:n?0:-394},to:{y:n?394:0},ref:m}),b=Object(a.useRef)(null),v=Object(z.c)({from:{y:n?0:394},to:{y:n?-394:0},ref:b}),h=Object(a.useRef)(null),g=Object(z.c)({from:{fillOpacity:n?1:0},to:{fillOpacity:n?0:1},onRest:t,ref:h});return Object(z.b)([{current:m.current},{current:b.current},{current:h.current}],n?[0,.48,.48]:[0,.38,.6]),o.a.createElement(G,null,o.a.createElement(J,null,o.a.createElement(z.a.svg,{viewBox:"-1 -1 645 394",width:r},o.a.createElement("defs",null,o.a.createElement("linearGradient",{id:"grad1".concat(s),x1:"0%",y1:"0%",x2:"0%",y2:"100%"},o.a.createElement("stop",{offset:"0%",stopColor:c[0],stopOpacity:"1"}),o.a.createElement("stop",{offset:"100%",stopColor:c[1],stopOpacity:"1"})),o.a.createElement("linearGradient",{id:"grad2".concat(s),x1:"0%",y1:"0%",x2:"0%",y2:"100%"},o.a.createElement("stop",{offset:"0%",stopColor:c[1],stopOpacity:"1"}),o.a.createElement("stop",{offset:"100%",stopColor:c[0],stopOpacity:"1"})),o.a.createElement("linearGradient",{id:"grad3".concat(s),x1:"0%",y1:"0%",x2:"0%",y2:"100%"},o.a.createElement("stop",{offset:"0%",stopColor:c[2],stopOpacity:"1"}),o.a.createElement("stop",{offset:"100%",stopColor:c[3],stopOpacity:"1"})),o.a.createElement("mask",{id:"farTrailMask".concat(s),maskUnits:"userSpaceOnUse"},o.a.createElement(z.a.rect,{width:"645",height:"394",fill:"white",style:p})),o.a.createElement("mask",{id:"closeTrailAndBallMask".concat(s),maskUnits:"userSpaceOnUse"},o.a.createElement(z.a.rect,{width:"645",height:"420",fill:"white",style:v,y:"394"}))),o.a.createElement("path",{id:"far-trail".concat(s),d:"M437.5 390C419.5 390 276 390 258 390C229.5 334 194 276.5 151 217C108 157.5 57.5 96 0 32.5C91 87.5 173.5 145 246.5 204.5C319.5 264.5 383 326 437.5 390Z",mask:"url(#farTrailMask".concat(s,")"),fill:"url(#grad2".concat(s,")")}),o.a.createElement("path",{id:"close-trail".concat(s),d:"M335.9 234C364.5 184.5 394.5 140 426 100C433 137.5 447.5 166 470 185C492 204 518.5 212.5 550 211.5C527 235 505 261.5 483.5 291C462 320.5 446.5 353.5 437.5 390L257.5 390C281 335.5 307.5 283.5 336 234Z",mask:"url(#closeTrailAndBallMask".concat(s,")"),fill:"url(#grad1".concat(s,")")}),o.a.createElement(z.a.path,{id:"ball".concat(s),d:"M540 200C484.81 200 440 155.17 440 100C440 44.81 484.81 0 540 0C595.19 0 640 44.81 640 100C640 155.17 595.19 200 540 200Z",fill:"url(#grad3".concat(s,")"),fillOpacity:"0",style:g}))))};P.defaultProps={toggle:!1,onAnimationFinish:function(){},width:400,colors:L.logo};var K=P;function X(){var e=Object(F.a)(["\n  display: flex;\n  width: 100%;\n\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  height: 100vh;\n"]);return X=function(){return e},e}var Y=Object(H.b)(z.a.div)(X()),Z=function(e){var n=e.onAnimationFinish,t=Object(a.useState)(!1),r=Object(u.a)(t,2),c=r[0],i=r[1],l=Object(z.c)({from:{opacity:c?1:0},to:{opacity:c?0:1}});return o.a.createElement(Y,null,o.a.createElement(K,{key:"loading",onAnimationFinish:c?n:function(){return i(!0)},toggle:c}),o.a.createElement(z.a.div,{style:l},c?"loaded :)":"loading..."))},q=t(21);function Q(){var e=Object(F.a)(["\n  :before {\n    content: 'X';\n  }\n  :hover {\n    color: red;\n  }\n  padding-left: 3rem;\n  padding-right: 1rem;\n"]);return Q=function(){return e},e}function $(){var e=Object(F.a)([""]);return $=function(){return e},e}function ee(){var e=Object(F.a)(["\n  position: absolute;\n  top: 5vh;\n  right: 5vh;\n  background-color: white;\n  z-index: 99;\n  color: ",";\n  font-size: 3rem;\n  padding: 1rem;\n  transition: 100ms;\n"]);return ee=function(){return e},e}var ne=H.b.div(ee(),L.background),te=H.b.span($()),re=H.b.span(Q()),ae=function(e){var n=e.setMenuOpen;return o.a.createElement(ne,null,o.a.createElement(te,null,"User"),n&&o.a.createElement(re,{onClick:n}))},oe=t(37);function ce(){var e=Object(F.a)(["\n  padding: 10px;\n  background: white;\n  color: ",";\n  margin-top: 5px;\n  margin-bottom: 5px;\n  font-size: 3rem;\n  transition: 100ms;\n  :hover {\n    color: red;\n  }\n"]);return ce=function(){return e},e}var ie=H.b.div(ce(),L.background),ue=function(e){var n=e.path,t=e.label,r=e.onClick;return o.a.createElement(ie,null,o.a.createElement(q.b,{to:n,onClick:r},t))},le=t(11);function se(){var e=Object(F.a)(["\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  flex-direction: column;\n  //transform: rotate(-5deg) skew(-5deg);\n  width: 40vw;\n  position: absolute;\n  bottom: 5vh;\n  right: 0;\n  z-index: 99;\n  color: ",";\n  font-size: 3rem;\n  overflow: hidden;\n"]);return se=function(){return e},e}var fe=H.b.div(se(),L.background),me=[{label:"Home",path:"/"},{label:"Game",path:"/game"},{label:"Settings",path:"/settings"}],de=Object(le.e)(function(e){var n=e.hideMenu,t=e.location,r=Object(a.useMemo)(function(){return me.filter(function(e){return e.path!==t.pathname})},[]),c=Object(z.d)(r.length,{opacity:1,x:0,from:{opacity:0,x:380}});return o.a.createElement(fe,null,c.map(function(e,t){var a=e.x,c=Object(oe.a)(e,["x"]);return o.a.createElement(z.a.div,{key:r[t].label,style:Object(m.a)({transform:a.interpolate(function(e){return"translate3d(".concat(e,"px,0,0)")}),marginRight:a},c)},o.a.createElement(ue,Object.assign({},r[t],{onClick:n})))}))});function pe(){var e=Object(F.a)(["\n  position: absolute;\n  top: 5vh;\n  left: 5vw;\n  padding: 10px;\n  margin: auto;\n"]);return pe=function(){return e},e}var be=H.b.div(pe()),ve=function(){return o.a.createElement(be,null,o.a.createElement(K,{key:"navigation",width:"80px",colors:["gray","white","white","gray"]}))};function he(){var e=Object(F.a)(["\n  background: black;\n  position: absolute;\n  z-index: 97;\n  height: 100vh;\n  width: 100vw;\n  opacity: 0.7;\n"]);return he=function(){return e},e}var ge=H.b.div(he()),Ee=Object(le.e)(function(e){var n=e.location,t=Object(a.useState)(!1),r=Object(u.a)(t,2),c=r[0],i=r[1],l="/"===n.pathname;return Object(a.useEffect)(function(){l&&i(!0)},[l]),o.a.createElement(o.a.Fragment,null,!l&&o.a.createElement(ve,null),o.a.createElement(ae,{setMenuOpen:function(){return i(function(e){return!e})}}),c&&o.a.createElement(o.a.Fragment,null,o.a.createElement(de,{key:n.pathname,hideMenu:function(){return i(!1)}}),!l&&o.a.createElement(ge,null)))}),ye=Object(a.memo)(function(e){var n=e.color,t=void 0===n?"white":n,r=e.path,c=Object(a.useMemo)(function(){return p(r[0].position)},r),i=c.x,u=c.y,l=Object(a.useMemo)(function(){return p(r[1].position)},r),s=l.x,f=l.y;return o.a.createElement("line",{pointerEvents:"none",x1:i,y1:u,x2:s,y2:f,stroke:t})}),Oe=Object(l.b)(function(e,n){var t=e.game,r=n.field;return{current:k(t),isValidMove:_(t).includes(r)}},function(e){return{addMove:function(n){return e(function(e){return{type:"@lineball/ADD_MOVE",payload:e}}(n))}}})(function(e){var n=e.position,t=n.x,r=n.y,c=e.current,i=e.addMove,l=e.field,s=e.isValidMove,f=Object(a.useState)(!1),m=Object(u.a)(f,2),d=m[0],b=m[1],v=c===l,h=p({x:t,y:r}),g=h.x,E=h.y;return o.a.createElement(o.a.Fragment,null,s&&o.a.createElement("circle",{onClick:function(){b(!1),i(l)},r:"4",fill:"transparent",cx:g,cy:E,onMouseEnter:function(){return b(!0)},onMouseLeave:function(){return b(!1)}}),o.a.createElement("circle",{pointerEvents:"none",cx:g,cy:E,r:d||v?"2":"0.5",fill:v?"red":"white"}),d&&s&&o.a.createElement(ye,{path:[c,l]}))}),je=Object(l.b)(function(e){var n=e.game,t=n.fields,r=n.size,a=n.borders;return{fields:t,moves:x(n),size:r,borders:a,currentTurn:C(n)}})(function(e){var n=e.fields,t=e.moves,a=e.size,c=a.x,i=a.y,u=e.borders,l=e.currentTurn;return o.a.createElement("svg",{width:50*c,height:50*(i+1),viewBox:"0 0 ".concat(10*c," ").concat(10*i)},u.map(function(e){return o.a.createElement(ye,{key:v(e),path:e,color:l.player===r.WHITE?"blue":"red"})}),t.map(function(e){var n=e.path;return o.a.createElement(ye,{key:v(n),path:n})}),n.map(function(e){return o.a.createElement(Oe,Object.assign({},e,{key:"".concat(e.position.x,"_").concat(e.position.y),field:e}))}))}),xe=Object(l.b)(function(e){var n=e.game;return{moves:x(n),turn:C(n)}},function(e){return{revertMove:function(){return e({type:"@lineball/REVERT_MOVE"})},revertTurn:function(){return e({type:"@lineball/REVERT_TURN"})}}})(function(e){var n=e.moves,t=e.revertMove,r=e.revertTurn,a=e.turn;return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,"Moves"),a.moves.length?o.a.createElement("button",{type:"button",onClick:function(){t()}},"revert move"):n.length&&o.a.createElement("button",{type:"button",onClick:function(){r()}},"revert turn"),o.a.createElement("ul",null,n.map(function(e){return o.a.createElement("li",{key:v(e.path)},JSON.stringify(e))})))}),we=Object(l.b)(function(e){var n=e.game;return{turn:C(n)}})(function(e){var n=e.turn,t=n.player,r=n.moves;return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,"Turn"),o.a.createElement("p",null,"player: ",t),o.a.createElement("p",null,"moves: ",JSON.stringify(r)))}),ke=function(){return o.a.createElement(U,null,o.a.createElement("div",{style:{maxWidth:960,marginLeft:"30%",overflowY:"scroll"}},o.a.createElement(je,null),o.a.createElement(we,null),o.a.createElement(xe,null)))},Ce=function(e,n){return"rotateX(".concat(-n,"deg) rotateY(").concat(e,"deg)")},Me=function(){var e=Object(z.c)(function(){return{xy:[0,0]}}),n=Object(u.a)(e,2),t=n[0],r=n[1];return Object(a.useEffect)(function(){var e=function(e){var n,t,a=e.clientX,o=e.clientY;return r({xy:(n=a,t=o,[60*(n-window.innerWidth/2)/window.innerWidth,60*(t-window.innerHeight/2)/window.innerHeight])})};return window.addEventListener("mousemove",e),function(){window.removeEventListener("mousemove",e)}}),o.a.createElement(U,null,o.a.createElement(z.a.div,{style:{transform:t.xy.interpolate(Ce)}},o.a.createElement(K,{width:"50vw"})))},Te=function(){return o.a.createElement(U,null,o.a.createElement("div",{style:{textAlign:"center"}},"Settings"))},_e=Object(le.e)(function(e){var n=e.location;return Object(z.e)(n,function(e){return e.pathname},{from:{opacity:0,transform:"translate3d(0, 100%,0)",position:"absolute"},enter:{opacity:1,transform:"translate3d(0, 0%,0)",position:"absolute"},leave:{opacity:0,transform:"translate3d(0, -50%,0)",position:"absolute"}}).map(function(e){var n=e.item,t=e.props,r=e.key;return o.a.createElement(z.a.div,{key:r,style:t},o.a.createElement(le.c,{location:n},o.a.createElement(le.a,{path:"/game",component:ke}),o.a.createElement(le.a,{path:"/settings",component:Te}),o.a.createElement(le.a,{path:"/",component:Me})))})}),Re=function(){var e=Object(a.useState)(!1),n=Object(u.a)(e,2),t=n[0],r=n[1];return t?o.a.createElement(l.a,{store:A},o.a.createElement(B,null),o.a.createElement(q.a,{basename:"client/"},o.a.createElement(Ee,null),o.a.createElement(_e,null))):o.a.createElement(o.a.Fragment,null,o.a.createElement(B,null),o.a.createElement(Z,{onAnimationFinish:function(){return r(!0)}}))};i.a.render(o.a.createElement(Re,null),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.10d85043.chunk.js.map