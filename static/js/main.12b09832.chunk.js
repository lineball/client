(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,n,t){e.exports=t(54)},54:function(e,n,t){"use strict";t.r(n);var r,a=t(0),i=t.n(a),o=t(24),c=t.n(o),l=t(6),u=t(14),s=t(18),f=t(8),m=t(9);!function(e){e[e.WHITE=0]="WHITE",e[e.BLACK=1]="BLACK"}(r||(r={}));var d=t(15),p=function(e){return{x:10*e.x+5,y:10*e.y}},b=function(e){var n=e.x,t=e.y;return"".concat(n,"_").concat(t)},v=function(e){var n=Object(l.a)(e,2),t=n[0],r=n[1];return"".concat(b(t.position),":").concat(b(r.position))},h=function(e){var n=e.x,t=e.y;return{name:"".concat(String.fromCharCode(65+t)).concat(n),position:{x:n,y:t}}},y=function(){return Object(d.flatMap)([].concat(Object(f.a)([0,12].map(function(e){return Object(d.range)(3,6).map(function(n){return h({x:n,y:e})})})),Object(f.a)(Object(d.range)(1,12).map(function(e){return Object(d.range)(0,9).map(function(n){return h({x:n,y:e})})}))))},E=function(e){return Object(d.partition)(Object(d.flatMap)(e.map(function(n){var t=n.position,r=t.x,a=t.y;return e.filter(function(e){return([r,r+1].includes(e.position.x)&&[a,a+1].includes(e.position.y)||e.position.x===r-1&&e.position.y===a+1)&&e.name!==n.name&&!function(e){var n=v(e);return["5_0:6_1","3_0:2_1","6_11:5_12","2_11:3_12"].includes(n)}([n,e])}).map(function(e){return[n,e]})})),function(e){var n=Object(l.a)(e,2),t=n[0],r=n[1];return function(e){var n=Object(l.a)(e,2),t=n[0],r=n[1];if(t.y===r.y){if([0,12].includes(t.y))return!0;if([1,11].includes(t.y)&&(t.x<3||t.x>=5))return!0}else if(t.x===r.x){if([0,8].includes(t.x))return!0;if([3,5].includes(t.x)&&[0,11].includes(t.y))return!0}return!1}([t.position,r.position])})},g=function(){var e=y(),n=E(e),t=Object(l.a)(n,2),a=t[0];return{fields:e,paths:t[1],borders:a,turns:[{player:r.WHITE,moves:[]}],size:{x:9,y:12}}},O=g(),j=t(20),x=function(e){return e.turns.flatMap(function(e){return e.moves})},w=Object(j.a)([x,function(e){return e.fields}],function(e,n){if(0===e.length){var t=n.find(function(e){return 4===e.position.x&&6===e.position.y});if(!t)throw new Error("Problem with getting last field");return t}if(1===e.length){var r=n.find(function(e){return 4===e.position.x&&6===e.position.y});if(!r)throw new Error("Problem with getting last field");return e[0].path[0]===r?e[0].path[1]:e[0].path[0]}var a=e[e.length-1];return a.path[a.direction]}),k=Object(j.a)([function(e){return e.turns}],function(e){if(!e.length)throw new Error("Error getting current turn");return e[e.length-1]}),C=Object(j.a)([w,function(e){return e.paths}],function(e,n){return n.filter(function(n){return n.includes(e)})}),M=Object(j.a)([x,w],function(e,n){return e.filter(function(e){return e.path.includes(n)}).map(function(e){return e.path})}),T=Object(j.a)([w,C,M],function(e,n,t){return Object(d.difference)(n,t).map(function(n){var t=Object(l.a)(n,2),r=t[0],a=t[1];return r===e?a:r})}),R=t(32),S=Object(s.combineReducers)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"@lineball/ADD_MOVE":var t=n.payload,a=w(e),i=e.paths.find(function(e){return e.includes(t)&&e.includes(a)});if(!i)throw new Error("Path not found!");var o=i[0]===t?0:1,c=Object(m.a)({},e.turns[e.turns.length-1],{moves:[].concat(Object(f.a)(e.turns[e.turns.length-1].moves),[{path:i,direction:o}])});if(e.turns.flatMap(function(e){return e.moves}).map(function(e){return e.path}).concat(e.borders).filter(function(e){return e.includes(t)}).map(function(e){return e}).length)return Object(m.a)({},e,{turns:[].concat(Object(f.a)(e.turns.slice(0,-1)),[c])});var l={moves:[],player:k(e).player===r.WHITE?r.BLACK:r.WHITE};return Object(m.a)({},e,{turns:[].concat(Object(f.a)(e.turns.slice(0,-1)),[c,l])});case"@lineball/REVERT_MOVE":var u=e.turns[e.turns.length-1];return u.moves.length>0?Object(m.a)({},e,{turns:[].concat(Object(f.a)(e.turns.slice(0,-1)),[Object(m.a)({},u,{moves:Object(f.a)(u.moves.slice(0,-1))})])}):Object(m.a)({},e);case"@lineball/REVERT_TURN":if(e.turns.length>2){if(e.turns[e.turns.length-1].moves.length>0)return Object(m.a)({},e);var s=e.turns[e.turns.length-2];return Object(m.a)({},e,{turns:[].concat(Object(f.a)(e.turns.slice(0,-2)),[Object(m.a)({},s,{moves:[]})])})}return Object(m.a)({},e,{turns:[{player:r.WHITE,moves:[]}]});default:return e}}}),_=Object(s.createStore)(S,Object(R.devToolsEnhancer)({})),A=t(4),F=t(3),z=t(5);function H(){var e=Object(A.a)(["\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  flex-direction: column;\n  overflow: hidden;\n  width: 100vw;\n  height: 100vh;\n"]);return H=function(){return e},e}function V(){var e=Object(A.a)(["\n  max-width: 960px;\n  margin: auto;\n  overflow-y: auto;\n  height: 100vh;\n"]);return V=function(){return e},e}function W(){var e=Object(A.a)(["\nbody {\n  margin: 0;\n  padding: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans',\n    'Droid Sans', 'Helvetica Neue', sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: white;\n  background-color: #282c34;\n}\n\na:any-link {\n  color: inherit;\n  text-decoration: none;\n}\n\n#root,\nhtml,\nbody {\n  height: 100%;\n  width: 100%;\n  min-height: 100%;\n  min-width: 100%;\n  overflow: hidden;\n}\n"]);return W=function(){return e},e}var B=Object(z.a)(W()),I=(z.b.div(V()),z.b.div(H())),U="#282c34",L={yellow:"#ff0",red:"#f00"};function N(){var e=Object(A.a)(["\n  flex: 0;\n  z-index: 1;\n"]);return N=function(){return e},e}function D(){var e=Object(A.a)(["\n  display: flex;\n  width: 100%;\n\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]);return D=function(){return e},e}var G=Object(z.b)(F.a.div)(D()),J=z.b.div(N()),P=function(e){var n=e.toggle,t=e.onAnimationFinish,r=e.width,o=e.colors,c=Object(a.useRef)(null),l=Object(F.c)({from:{y:n?0:-394},to:{y:n?394:0},ref:c}),u=Object(a.useRef)(null),s=Object(F.c)({from:{y:n?0:394},to:{y:n?-394:0},ref:u}),f=Object(a.useRef)(null),m=Object(F.c)({from:{fillOpacity:n?1:0},to:{fillOpacity:n?0:1},onRest:t,ref:f});return Object(F.b)(n?[c,u,{current:f.current}]:[c,u,f],n?[0,.48,.48]:[0,.38,.6]),i.a.createElement(G,null,i.a.createElement(J,null,i.a.createElement(F.a.svg,{viewBox:"-1 -1 645 394",width:r},i.a.createElement("defs",null,i.a.createElement("linearGradient",{id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},i.a.createElement("stop",{offset:"0%",stopColor:o[0],stopOpacity:"1"}),i.a.createElement("stop",{offset:"100%",stopColor:o[1],stopOpacity:"1"})),i.a.createElement("linearGradient",{id:"grad2",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},i.a.createElement("stop",{offset:"0%",stopColor:o[1],stopOpacity:"1"}),i.a.createElement("stop",{offset:"100%",stopColor:o[0],stopOpacity:"1"})),i.a.createElement("linearGradient",{id:"grad3",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},i.a.createElement("stop",{offset:"0%",stopColor:o[2],stopOpacity:"1"}),i.a.createElement("stop",{offset:"100%",stopColor:o[3],stopOpacity:"1"})),i.a.createElement("mask",{id:"farTrailMask",maskUnits:"userSpaceOnUse"},i.a.createElement(F.a.rect,{width:"645",height:"394",fill:"white",style:l})),i.a.createElement("mask",{id:"closeTrailAndBallMask",maskUnits:"userSpaceOnUse"},i.a.createElement(F.a.rect,{width:"645",height:"420",fill:"white",style:s,y:"394"}))),i.a.createElement("path",{id:"far-trail",d:"M437.5 390C419.5 390 276 390 258 390C229.5 334 194 276.5 151 217C108 157.5 57.5 96 0 32.5C91 87.5 173.5 145 246.5 204.5C319.5 264.5 383 326 437.5 390Z",mask:"url(#farTrailMask)",fill:"url(#grad2)"}),i.a.createElement("path",{id:"close-trail",d:"M335.9 234C364.5 184.5 394.5 140 426 100C433 137.5 447.5 166 470 185C492 204 518.5 212.5 550 211.5C527 235 505 261.5 483.5 291C462 320.5 446.5 353.5 437.5 390L257.5 390C281 335.5 307.5 283.5 336 234Z",mask:"url(#closeTrailAndBallMask)",fill:"url(#grad1)"}),i.a.createElement(F.a.path,{id:"ball",d:"M540 200C484.81 200 440 155.17 440 100C440 44.81 484.81 0 540 0C595.19 0 640 44.81 640 100C640 155.17 595.19 200 540 200Z",fill:"url(#grad3)",fillOpacity:"0",style:m}))))};P.defaultProps={toggle:!1,onAnimationFinish:function(){return null},width:400,colors:[L.red,L.yellow,"#aaa","white"]};var K=P;function X(){var e=Object(A.a)(["\n  display: flex;\n  width: 100%;\n\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  height: 100vh;\n"]);return X=function(){return e},e}var Y=Object(z.b)(F.a.div)(X()),Z=function(e){var n=e.onAnimationFinish,t=Object(a.useState)(!1),r=Object(l.a)(t,2),o=r[0],c=r[1],u=Object(F.c)({from:{opacity:o?1:0},to:{opacity:o?0:1}});return i.a.createElement(Y,null,i.a.createElement(K,{key:"loading",onAnimationFinish:o?n:function(){return c(!0)},toggle:o}),i.a.createElement(F.a.div,{style:u},o?"loaded :)":"loading..."))},q=t(21);function Q(){var e=Object(A.a)(["\n  :before {\n    content: 'X';\n  }\n  :hover {\n    color: red;\n  }\n  padding-left: 3rem;\n  padding-right: 1rem;\n"]);return Q=function(){return e},e}function $(){var e=Object(A.a)([""]);return $=function(){return e},e}function ee(){var e=Object(A.a)(["\n  position: absolute;\n  top: 5vh;\n  right: 5vh;\n  background-color: white;\n  z-index: 99;\n  color: ",";\n  font-size: 3rem;\n  padding: 1rem;\n  transition: 100ms;\n"]);return ee=function(){return e},e}var ne=z.b.div(ee(),U),te=z.b.span($()),re=z.b.span(Q()),ae=function(e){var n=e.setMenuOpen;return i.a.createElement(ne,null,i.a.createElement(te,null,"%USERNAME%"),n&&i.a.createElement(re,{onClick:n}))},ie=t(37);function oe(){var e=Object(A.a)(["\n  padding: 10px;\n  background: white;\n  color: ",";\n  margin-top: 5px;\n  margin-bottom: 5px;\n  font-size: 3rem;\n  transition: 100ms;\n  :hover {\n    color: red;\n  }\n"]);return oe=function(){return e},e}var ce=z.b.div(oe(),U),le=function(e){var n=e.path,t=e.label,r=e.onClick;return i.a.createElement(ce,null,i.a.createElement(q.b,{to:n,onClick:r},t))},ue=t(11);function se(){var e=Object(A.a)(["\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  flex-direction: column;\n  //transform: rotate(-5deg) skew(-5deg);\n  width: 40vw;\n  position: absolute;\n  bottom: 5vh;\n  right: 0;\n  z-index: 99;\n  color: ",";\n  font-size: 3rem;\n  overflow: hidden;\n"]);return se=function(){return e},e}var fe=z.b.div(se(),U),me=[{label:"Home",path:"/"},{label:"Game",path:"/game"},{label:"Settings",path:"/settings"}],de=Object(ue.e)(function(e){var n=e.hideMenu,t=e.location,r=Object(a.useMemo)(function(){return me.filter(function(e){return e.path!==t.pathname})},[]),o=Object(F.d)(r.length,{opacity:1,x:0,from:{opacity:0,x:380}});return i.a.createElement(fe,null,o.map(function(e,t){var a=e.x,o=Object(ie.a)(e,["x"]);return i.a.createElement(F.a.div,{key:r[t].label,style:Object(m.a)({transform:a.interpolate(function(e){return"translate3d(".concat(e,"px,0,0)")}),marginRight:a},o)},i.a.createElement(le,Object.assign({},r[t],{onClick:n})))}))});function pe(){var e=Object(A.a)(["\n  position: absolute;\n  top: 5vh;\n  left: 5vw;\n  padding: 10px;\n  margin: auto;\n"]);return pe=function(){return e},e}var be=z.b.div(pe()),ve=function(){return i.a.createElement(be,null,i.a.createElement(K,{key:"navigation",width:"80px",colors:["gray","white","white","gray"]}))};function he(){var e=Object(A.a)(["\n  background: black;\n  position: absolute;\n  z-index: 97;\n  height: 100vh;\n  width: 100vw;\n  opacity: 0.7;\n"]);return he=function(){return e},e}var ye=z.b.div(he()),Ee=Object(ue.e)(function(e){var n=e.location,t=Object(a.useState)(!1),r=Object(l.a)(t,2),o=r[0],c=r[1],u="/"===n.pathname;return Object(a.useEffect)(function(){u&&c(!0)},[u]),i.a.createElement(i.a.Fragment,null,!u&&i.a.createElement(ve,null),i.a.createElement(ae,{setMenuOpen:function(){return c(function(e){return!e})}}),o&&i.a.createElement(i.a.Fragment,null,i.a.createElement(de,{key:n.pathname,hideMenu:function(){return c(!1)}}),!u&&i.a.createElement(ye,null)))}),ge=Object(a.memo)(function(e){var n=e.color,t=void 0===n?"white":n,r=e.path,o=Object(a.useMemo)(function(){return p(r[0].position)},r),c=o.x,l=o.y,u=Object(a.useMemo)(function(){return p(r[1].position)},r),s=u.x,f=u.y;return i.a.createElement("line",{pointerEvents:"none",x1:c,y1:l,x2:s,y2:f,stroke:t})}),Oe=Object(u.b)(function(e,n){var t=e.game,r=n.field;return{current:w(t),isValidMove:T(t).includes(r)}},function(e){return{addMove:function(n){return e(function(e){return{type:"@lineball/ADD_MOVE",payload:e}}(n))}}})(function(e){var n=e.position,t=n.x,r=n.y,o=e.current,c=e.addMove,u=e.field,s=e.isValidMove,f=Object(a.useState)(!1),m=Object(l.a)(f,2),d=m[0],b=m[1],v=o===u,h=p({x:t,y:r}),y=h.x,E=h.y;return i.a.createElement(i.a.Fragment,null,s&&i.a.createElement("circle",{onClick:function(){b(!1),c(u)},r:"4",fill:"transparent",cx:y,cy:E,onMouseEnter:function(){return b(!0)},onMouseLeave:function(){return b(!1)}}),i.a.createElement("circle",{pointerEvents:"none",cx:y,cy:E,r:d||v?"2":"0.5",fill:v?"red":"white"}),d&&s&&i.a.createElement(ge,{path:[o,u]}))}),je=Object(u.b)(function(e){var n=e.game,t=n.fields,r=n.size,a=n.borders;return{fields:t,moves:x(n),size:r,borders:a,currentTurn:k(n)}})(function(e){var n=e.fields,t=e.moves,a=e.size,o=a.x,c=a.y,l=e.borders,u=e.currentTurn;return i.a.createElement("svg",{width:50*o,height:50*(c+1),viewBox:"0 0 ".concat(10*o," ").concat(10*c)},l.map(function(e){return i.a.createElement(ge,{key:v(e),path:e,color:u.player===r.WHITE?"blue":"red"})}),t.map(function(e){var n=e.path;return i.a.createElement(ge,{key:v(n),path:n})}),n.map(function(e){return i.a.createElement(Oe,Object.assign({},e,{key:"".concat(e.position.x,"_").concat(e.position.y),field:e}))}))}),xe=Object(u.b)(function(e){var n=e.game;return{moves:x(n),turn:k(n)}},function(e){return{revertMove:function(){return e({type:"@lineball/REVERT_MOVE"})},revertTurn:function(){return e({type:"@lineball/REVERT_TURN"})}}})(function(e){var n=e.moves,t=e.revertMove,r=e.revertTurn,a=e.turn;return i.a.createElement(i.a.Fragment,null,i.a.createElement("h3",null,"Moves"),a.moves.length?i.a.createElement("button",{type:"button",onClick:function(){t()}},"revert move"):n.length&&i.a.createElement("button",{type:"button",onClick:function(){r()}},"revert turn"),i.a.createElement("ul",null,n.map(function(e){return i.a.createElement("li",{key:v(e.path)},JSON.stringify(e))})))}),we=Object(u.b)(function(e){var n=e.game;return{turn:k(n)}})(function(e){var n=e.turn,t=n.player,r=n.moves;return i.a.createElement(i.a.Fragment,null,i.a.createElement("h3",null,"Turn"),i.a.createElement("p",null,"player: ",t),i.a.createElement("p",null,"moves: ",JSON.stringify(r)))}),ke=function(){return i.a.createElement(I,null,i.a.createElement("div",{style:{maxWidth:960,marginLeft:"30%",overflowY:"scroll"}},i.a.createElement(je,null),i.a.createElement(we,null),i.a.createElement(xe,null)))},Ce=function(e,n){return[60*(e-window.innerWidth/2)/window.innerWidth,60*(n-window.innerHeight/2)/window.innerHeight]},Me=function(e,n){return"rotateX(".concat(-n,"deg) rotateY(").concat(e,"deg)")},Te=function(){var e=Object(F.c)(function(){return{xy:[0,0]}}),n=Object(l.a)(e,2),t=n[0],r=n[1];return Object(a.useEffect)(function(){var e=function(e){var n=e.clientX,t=e.clientY;return r({xy:Ce(n,t)})};return window.addEventListener("mousemove",e),function(){window.removeEventListener("mousemove",e)}}),i.a.createElement(I,null,i.a.createElement(F.a.div,{style:{transform:t.xy.interpolate(Me)}},i.a.createElement(K,{width:"50vw"})))},Re=function(){return i.a.createElement(I,null,i.a.createElement("div",{style:{textAlign:"center"}},"Settings"))},Se=Object(ue.e)(function(e){var n=e.location;return Object(F.e)(n,function(e){return e.pathname},{from:{opacity:0,transform:"translate3d(0, 100%,0)",position:"absolute"},enter:{opacity:1,transform:"translate3d(0, 0%,0)",position:"absolute"},leave:{opacity:0,transform:"translate3d(0, -50%,0)",position:"absolute"}}).map(function(e){var n=e.item,t=e.props,r=e.key;return i.a.createElement(F.a.div,{key:r,style:t},i.a.createElement(ue.c,{location:n},i.a.createElement(ue.a,{path:"/game",component:ke}),i.a.createElement(ue.a,{path:"/settings",component:Re}),i.a.createElement(ue.a,{path:"/",component:Te})))})}),_e=function(){var e=Object(a.useState)(!1),n=Object(l.a)(e,2),t=n[0],r=n[1];return t?i.a.createElement(u.a,{store:_},i.a.createElement(B,null),i.a.createElement(q.a,{basename:"client/"},i.a.createElement(Ee,null),i.a.createElement(Se,null))):i.a.createElement(i.a.Fragment,null,i.a.createElement(B,null),i.a.createElement(Z,{onAnimationFinish:function(){return r(!0)}}))};c.a.render(i.a.createElement(_e,null),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.12b09832.chunk.js.map